# ğŸ¤ Gestion des Partenaires

**Administration complÃ¨te des partenaires producteurs avec KPIs, commissions, et portail collaboratif.**

## ğŸ¯ Objectif

GÃ©rer l'Ã©cosystÃ¨me des partenaires producteurs (HABEEBEE, ILANGA NATURE, PROMIEL) : onboarding, suivi performance, commissions, catalogue produits, et relation commerciale.

## ğŸ‘¤ Utilisateurs Cibles

- **Partnership Manager** : Gestion relations + nÃ©gociations
- **Accounting** : Commissions, paiements, facturations
- **Operations** : Coordination livraisons + qualitÃ©
- **Partners** : AccÃ¨s portail dÃ©diÃ©

## ğŸ¨ Design & Layout

### Page Tableau de Bord Partenaires

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Partenaires | 3 actifs                   [+ Nouveau]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š KPIs Globaux                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ğŸ’° CA Mensuel â”‚ â”‚ğŸ“¦ Commandes  â”‚ â”‚ğŸ¯ Satisfactionâ”‚ â”‚â° DÃ©laisâ”‚ â”‚
â”‚ â”‚â‚¬24,680       â”‚ â”‚347 traitÃ©es  â”‚ â”‚4.7/5 â­      â”‚ â”‚2.3 joursâ”‚ â”‚
â”‚ â”‚+12% vs M-1   â”‚ â”‚+5% vs M-1    â”‚ â”‚+0.2 vs M-1   â”‚ â”‚-0.5j   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” [Recherche] [Statut â–¼] [RÃ©gion â–¼] [Performance â–¼]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Liste Partenaires                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ HABEEBEE                                      [Edit] â”‚ â”‚
â”‚ â”‚ Miel & Produits Ruche â€¢ Provence â€¢ Premium             â”‚ â”‚
â”‚ â”‚ ğŸ“ˆ â‚¬18,450/mois â€¢ 234 commandes â€¢ 4.8â­ â€¢ âœ… Actif     â”‚ â”‚
â”‚ â”‚ ğŸ“¦ 42 produits â€¢ Commission: 25% â€¢ Paiement: NET15     â”‚ â”‚
â”‚ â”‚ [Produits][Analytics][Commissions][Messages]           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸŒ¿ ILANGA NATURE                                 [Edit] â”‚ â”‚
â”‚ â”‚ CosmÃ©tiques Naturels â€¢ Bio â€¢ Standard                  â”‚ â”‚
â”‚ â”‚ ğŸ“ˆ â‚¬5,120/mois â€¢ 98 commandes â€¢ 4.6â­ â€¢ âœ… Actif       â”‚ â”‚
â”‚ â”‚ ğŸ“¦ 28 produits â€¢ Commission: 20% â€¢ Paiement: NET30     â”‚ â”‚
â”‚ â”‚ [Produits][Analytics][Commissions][Messages]           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Modal DÃ©tails Partenaire

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HABEEBEE - Partenaire Premium                          [âœ•] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Tabs: [Informations][Produits][Analytics][Financier][QR]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ Informations GÃ©nÃ©rales                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” Nom: [HABEEBEE________________]         â”‚
â”‚ â”‚ [Logo Upload]   â”‚ Email: [contact@habeebee.fr___]         â”‚
â”‚ â”‚ ğŸ“· 150x150     â”‚ TÃ©lÃ©phone: [+33 4 XX XX XX XX]          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Site web: [www.habeebee.fr____]         â”‚
â”‚                                                             â”‚
â”‚ ğŸ“ Adresse & Livraison                                     â”‚
â”‚ Adresse: [123 Route des Lavandes, 84000 Avignon___]        â”‚
â”‚ SIRET: [12345678901234] TVA: [FR12345678901____]            â”‚
â”‚ RÃ©gion: [Provence-Alpes-CÃ´te d'Azur â–¼]                     â”‚
â”‚                                                             â”‚
â”‚ ğŸ¤ Commercial                                              â”‚
â”‚ Tier: [Premium â–¼] Commission: [25___]%                     â”‚
â”‚ Conditions paiement: [NET15 â–¼]                             â”‚
â”‚ Gestionnaire: [Marie Dubois â–¼]                             â”‚
â”‚                                                             â”‚
â”‚ ğŸ“Š Certifications                                          â”‚
â”‚ [âœ“] Bio Agriculture   [âœ“] QualitÃ© France                   â”‚
â”‚ [âœ“] Commerce Ã‰quitable   [ ] Vegan Certified               â”‚
â”‚                                                             â”‚
â”‚ [Sauvegarder] [Voir portail](./portal.md) [Contacter]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± Composants UI

### KPIs Dashboard Header

```tsx
<div className="grid grid-cols-4 gap-6 mb-8">
  <Card>
    <CardContent className="p-6">
      <div className="flex items-center">
        <div className="flex-1">
          <p className="text-sm font-medium text-muted-foreground">CA Mensuel</p>
          <p className="text-2xl font-bold">â‚¬{totalRevenue.toLocaleString()}</p>
          <p className="text-xs text-green-600 flex items-center">
            <TrendingUp className="h-3 w-3 mr-1" />
            +{revenueGrowth}% vs mois prÃ©cÃ©dent
          </p>
        </div>
        <div className="h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center">
          <Euro className="h-6 w-6 text-green-600" />
        </div>
      </div>
    </CardContent>
  </Card>

  <Card>
    <CardContent className="p-6">
      <div className="flex items-center">
        <div className="flex-1">
          <p className="text-sm font-medium text-muted-foreground">Commandes</p>
          <p className="text-2xl font-bold">{totalOrders}</p>
          <p className="text-xs text-blue-600 flex items-center">
            <Package className="h-3 w-3 mr-1" />
            {completedOrders} complÃ©tÃ©es
          </p>
        </div>
        <div className="h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center">
          <ShoppingCart className="h-6 w-6 text-blue-600" />
        </div>
      </div>
    </CardContent>
  </Card>

  <Card>
    <CardContent className="p-6">
      <div className="flex items-center">
        <div className="flex-1">
          <p className="text-sm font-medium text-muted-foreground">Satisfaction</p>
          <p className="text-2xl font-bold flex items-center">
            {averageRating}/5
            <Star className="h-5 w-5 text-yellow-500 ml-1 fill-current" />
          </p>
          <p className="text-xs text-green-600 flex items-center">
            <ThumbsUp className="h-3 w-3 mr-1" />
            +0.2 vs mois prÃ©cÃ©dent
          </p>
        </div>
        <div className="h-12 w-12 bg-yellow-100 rounded-lg flex items-center justify-center">
          <Heart className="h-6 w-6 text-yellow-600" />
        </div>
      </div>
    </CardContent>
  </Card>

  <Card>
    <CardContent className="p-6">
      <div className="flex items-center">
        <div className="flex-1">
          <p className="text-sm font-medium text-muted-foreground">DÃ©lai Moyen</p>
          <p className="text-2xl font-bold">{averageDeliveryTime} jours</p>
          <p className="text-xs text-green-600 flex items-center">
            <Clock className="h-3 w-3 mr-1" />
            -0.5j amÃ©lioration
          </p>
        </div>
        <div className="h-12 w-12 bg-purple-100 rounded-lg flex items-center justify-center">
          <Truck className="h-6 w-6 text-purple-600" />
        </div>
      </div>
    </CardContent>
  </Card>
</div>
```

### Card Partenaire

```tsx
<Card className="hover:shadow-lg transition-shadow">
  <CardContent className="p-6">
    <div className="flex items-start justify-between mb-4">
      <div className="flex items-center space-x-4">
        <Avatar className="h-16 w-16">
          <AvatarImage src={partner.logo} alt={partner.name} />
          <AvatarFallback>{partner.name.slice(0, 2)}</AvatarFallback>
        </Avatar>
        <div>
          <h3 className="text-lg font-semibold flex items-center gap-2">
            {partner.name}
            <Badge variant={partner.tier === 'premium' ? 'default' : 'secondary'}>
              {partner.tier}
            </Badge>
          </h3>
          <p className="text-sm text-muted-foreground">
            {partner.category} â€¢ {partner.region}
          </p>
          <div className="flex items-center mt-1">
            <Star className="h-4 w-4 text-yellow-500 fill-current" />
            <span className="text-sm ml-1">{partner.rating}/5</span>
            <span className="mx-2">â€¢</span>
            <Badge variant={partner.status === 'active' ? 'success' : 'secondary'}>
              {partner.status}
            </Badge>
          </div>
        </div>
      </div>
      <DropdownMenu>
        <DropdownMenuTrigger asChild>
          <Button variant="ghost" size="sm">
            <MoreHorizontal className="h-4 w-4" />
          </Button>
        </DropdownMenuTrigger>
        <DropdownMenuContent>
          <DropdownMenuItem onClick={() => editPartner(partner.id)}>
            <Edit className="mr-2 h-4 w-4" />
            Modifier
          </DropdownMenuItem>
          <DropdownMenuItem onClick={() => viewPortal(partner.id)}>
            <ExternalLink className="mr-2 h-4 w-4" />
            Voir portail
          </DropdownMenuItem>
          <DropdownMenuItem onClick={() => sendMessage(partner.id)}>
            <MessageSquare className="mr-2 h-4 w-4" />
            Envoyer message
          </DropdownMenuItem>
          <DropdownMenuSeparator />
          <DropdownMenuItem onClick={() => generateReport(partner.id)}>
            <FileText className="mr-2 h-4 w-4" />
            Rapport performance
          </DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>
    </div>

    <div className="grid grid-cols-2 gap-4 mb-4">
      <div className="text-center p-3 bg-green-50 rounded-lg">
        <p className="text-sm text-muted-foreground">CA Mensuel</p>
        <p className="text-lg font-semibold text-green-700">
          â‚¬{partner.monthly_revenue.toLocaleString()}
        </p>
      </div>
      <div className="text-center p-3 bg-blue-50 rounded-lg">
        <p className="text-sm text-muted-foreground">Commandes</p>
        <p className="text-lg font-semibold text-blue-700">
          {partner.orders_count}
        </p>
      </div>
    </div>

    <div className="flex justify-between items-center text-sm text-muted-foreground mb-4">
      <span>{partner.products_count} produits</span>
      <span>Commission: {partner.commission_rate}%</span>
      <span>Paiement: {partner.payment_terms}</span>
    </div>

    <div className="flex gap-2">
      <Button variant="outline" size="sm" className="flex-1" onClick={() => viewProducts(partner.id)}>
        <Package className="h-4 w-4 mr-2" />
        Produits
      </Button>
      <Button variant="outline" size="sm" className="flex-1" onClick={() => viewAnalytics(partner.id)}>
        <BarChart className="h-4 w-4 mr-2" />
        Analytics
      </Button>
      <Button variant="outline" size="sm" className="flex-1" onClick={() => viewCommissions(partner.id)}>
        <DollarSign className="h-4 w-4 mr-2" />
        Commissions
      </Button>
    </div>
  </CardContent>
</Card>
```

### Formulaire Partenaire

```tsx
<Form {...partnerForm}>
  <form onSubmit={partnerForm.handleSubmit(onSubmit)} className="space-y-6">
    <Tabs defaultValue="general" className="w-full">
      <TabsList className="grid w-full grid-cols-5">
        <TabsTrigger value="general">GÃ©nÃ©ral</TabsTrigger>
        <TabsTrigger value="commercial">Commercial</TabsTrigger>
        <TabsTrigger value="logistics">Logistique</TabsTrigger>
        <TabsTrigger value="quality">QualitÃ©</TabsTrigger>
        <TabsTrigger value="portal">Portail</TabsTrigger>
      </TabsList>

      <TabsContent value="general" className="space-y-4">
        <div className="grid grid-cols-2 gap-6">
          <div className="space-y-4">
            <FormField
              control={partnerForm.control}
              name="name"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Nom du partenaire</FormLabel>
                  <FormControl>
                    <Input placeholder="HABEEBEE" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={partnerForm.control}
              name="email"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>Email principal</FormLabel>
                  <FormControl>
                    <Input type="email" placeholder="contact@partenaire.fr" {...field} />
                  </FormControl>
                  <FormMessage />
                </FormItem>
              )}
            />

            <FormField
              control={partnerForm.control}
              name="category"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>CatÃ©gorie</FormLabel>
                  <Select onValueChange={field.onChange} defaultValue={field.value}>
                    <FormControl>
                      <SelectTrigger>
                        <SelectValue placeholder="SÃ©lectionner" />
                      </SelectTrigger>
                    </FormControl>
                    <SelectContent>
                      <SelectItem value="apiculture">ğŸ Apiculture</SelectItem>
                      <SelectItem value="cosmetics">ğŸ§´ CosmÃ©tiques</SelectItem>
                      <SelectItem value="food">ğŸ¥˜ Alimentaire</SelectItem>
                      <SelectItem value="crafts">ğŸ¨ Artisanat</SelectItem>
                    </SelectContent>
                  </Select>
                  <FormMessage />
                </FormItem>
              )}
            />
          </div>

          <div className="space-y-4">
            <div>
              <FormLabel>Logo partenaire</FormLabel>
              <div className="mt-2">
                <ImageUpload
                  value={partnerLogo}
                  onChange={setPartnerLogo}
                  maxImages={1}
                  aspect="square"
                />
              </div>
            </div>

            <FormField
              control={partnerForm.control}
              name="region"
              render={({ field }) => (
                <FormItem>
                  <FormLabel>RÃ©gion</FormLabel>
                  <Select onValueChange={field.onChange} defaultValue={field.value}>
                    <FormControl>
                      <SelectTrigger>
                        <SelectValue placeholder="SÃ©lectionner" />
                      </SelectTrigger>
                    </FormControl>
                    <SelectContent>
                      <SelectItem value="provence">Provence-Alpes-CÃ´te d'Azur</SelectItem>
                      <SelectItem value="occitanie">Occitanie</SelectItem>
                      <SelectItem value="auvergne">Auvergne-RhÃ´ne-Alpes</SelectItem>
                      <SelectItem value="nouvelle_aquitaine">Nouvelle-Aquitaine</SelectItem>
                    </SelectContent>
                  </Select>
                  <FormMessage />
                </FormItem>
              )}
            />
          </div>
        </div>
      </TabsContent>

      <TabsContent value="commercial" className="space-y-4">
        <div className="grid grid-cols-2 gap-6">
          <FormField
            control={partnerForm.control}
            name="tier"
            render={({ field }) => (
              <FormItem>
                <FormLabel>Tier Partenaire</FormLabel>
                <Select onValueChange={field.onChange} defaultValue={field.value}>
                  <FormControl>
                    <SelectTrigger>
                      <SelectValue placeholder="SÃ©lectionner" />
                    </SelectTrigger>
                  </FormControl>
                  <SelectContent>
                    <SelectItem value="standard">Standard (20% commission)</SelectItem>
                    <SelectItem value="premium">Premium (25% commission)</SelectItem>
                    <SelectItem value="exclusive">Exclusif (30% commission)</SelectItem>
                  </SelectContent>
                </Select>
                <FormMessage />
              </FormItem>
            )}
          />

          <FormField
            control={partnerForm.control}
            name="commission_rate"
            render={({ field }) => (
              <FormItem>
                <FormLabel>Taux Commission (%)</FormLabel>
                <FormControl>
                  <Input type="number" min="10" max="40" {...field} />
                </FormControl>
                <FormDescription>
                  BasÃ© sur le prix de vente final
                </FormDescription>
                <FormMessage />
              </FormItem>
            )}
          />

          <FormField
            control={partnerForm.control}
            name="payment_terms"
            render={({ field }) => (
              <FormItem>
                <FormLabel>Conditions Paiement</FormLabel>
                <Select onValueChange={field.onChange} defaultValue={field.value}>
                  <FormControl>
                    <SelectTrigger>
                      <SelectValue placeholder="SÃ©lectionner" />
                    </SelectTrigger>
                  </FormControl>
                  <SelectContent>
                    <SelectItem value="net7">NET 7 (7 jours)</SelectItem>
                    <SelectItem value="net15">NET 15 (15 jours)</SelectItem>
                    <SelectItem value="net30">NET 30 (30 jours)</SelectItem>
                    <SelectItem value="net45">NET 45 (45 jours)</SelectItem>
                  </SelectContent>
                </Select>
                <FormMessage />
              </FormItem>
            )}
          />

          <FormField
            control={partnerForm.control}
            name="account_manager"
            render={({ field }) => (
              <FormItem>
                <FormLabel>Gestionnaire Compte</FormLabel>
                <Select onValueChange={field.onChange} defaultValue={field.value}>
                  <FormControl>
                    <SelectTrigger>
                      <SelectValue placeholder="Assigner" />
                    </SelectTrigger>
                  </FormControl>
                  <SelectContent>
                    <SelectItem value="marie">Marie Dubois</SelectItem>
                    <SelectItem value="jean">Jean Martin</SelectItem>
                    <SelectItem value="sophie">Sophie Laurent</SelectItem>
                  </SelectContent>
                </Select>
                <FormMessage />
              </FormItem>
            )}
          />
        </div>
      </TabsContent>

      <TabsContent value="quality" className="space-y-4">
        <div>
          <FormLabel className="text-base font-medium">Certifications</FormLabel>
          <div className="grid grid-cols-2 gap-4 mt-3">
            <div className="flex items-center space-x-2">
              <Checkbox id="bio" />
              <label htmlFor="bio" className="text-sm">Bio Agriculture</label>
            </div>
            <div className="flex items-center space-x-2">
              <Checkbox id="fair_trade" />
              <label htmlFor="fair_trade" className="text-sm">Commerce Ã‰quitable</label>
            </div>
            <div className="flex items-center space-x-2">
              <Checkbox id="quality_france" />
              <label htmlFor="quality_france" className="text-sm">QualitÃ© France</label>
            </div>
            <div className="flex items-center space-x-2">
              <Checkbox id="vegan" />
              <label htmlFor="vegan" className="text-sm">Vegan Certified</label>
            </div>
          </div>
        </div>

        <FormField
          control={partnerForm.control}
          name="quality_score"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Score QualitÃ© Initial</FormLabel>
              <FormControl>
                <Slider
                  min={1}
                  max={5}
                  step={0.1}
                  value={[field.value]}
                  onValueChange={(value) => field.onChange(value[0])}
                />
              </FormControl>
              <FormDescription>
                Score qualitÃ© initial: {field.value}/5
              </FormDescription>
              <FormMessage />
            </FormItem>
          )}
        />
      </TabsContent>
    </Tabs>

    <DialogFooter>
      <Button type="button" variant="outline" onClick={() => setShowDialog(false)}>
        Annuler
      </Button>
      <Button type="submit">
        {isEditing ? 'Mettre Ã  jour' : 'CrÃ©er partenaire'}
      </Button>
    </DialogFooter>
  </form>
</Form>
```

## ğŸ”„ Ã‰tats & Interactions

### Ã‰tats Partenaire

```typescript
type PartnerStatus = 
  | 'pending'      // En attente validation
  | 'active'       // Actif et opÃ©rationnel
  | 'suspended'    // Suspendu temporairement
  | 'terminated';  // Partenariat terminÃ©

type PartnerTier = 
  | 'standard'     // 20% commission
  | 'premium'      // 25% commission
  | 'exclusive';   // 30% commission
```

### Calculs Automatiques

```typescript
// Commission automatique par tier
const getCommissionRate = (tier: PartnerTier): number => {
  const rates = {
    'standard': 0.20,
    'premium': 0.25,
    'exclusive': 0.30
  };
  return rates[tier];
};

// Score de performance global
const calculatePerformanceScore = (partner: Partner) => {
  const qualityWeight = 0.3;
  const deliveryWeight = 0.25;
  const satisfactionWeight = 0.25;
  const salesWeight = 0.2;
  
  return (
    partner.quality_score * qualityWeight +
    partner.delivery_score * deliveryWeight +
    partner.satisfaction_score * satisfactionWeight +
    partner.sales_score * salesWeight
  );
};
```

## ğŸ“¡ API & DonnÃ©es

### Routes tRPC

```typescript
// CRUD Partenaires
admin.partners.list: {
  input: {
    page: number;
    limit: number;
    search?: string;
    status?: PartnerStatus;
    tier?: PartnerTier;
    region?: string;
  };
  output: {
    partners: Partner[];
    total: number;
    kpis: PartnerKPIs;
  };
}

admin.partners.create: {
  input: CreatePartnerInput;
  output: { partner: Partner; portal_credentials: PortalCredentials };
}

// Analytics partenaire
admin.partners.analytics: {
  input: { partner_id: string; date_range?: [Date, Date] };
  output: {
    revenue_trend: Array<{ date: Date; revenue: number }>;
    order_metrics: OrderMetrics;
    product_performance: ProductPerformance[];
    quality_scores: QualityScores;
  };
}

// Commissions
admin.partners.commissions: {
  input: { partner_id: string; period: string };
  output: {
    commission_total: number;
    commission_details: CommissionDetail[];
    payment_status: PaymentStatus;
  };
}
```

### ModÃ¨les de DonnÃ©es

```typescript
interface Partner {
  id: string;
  name: string;
  email: string;
  logo_url?: string;
  category: string;
  region: string;
  tier: PartnerTier;
  status: PartnerStatus;
  commission_rate: number;
  payment_terms: string;
  account_manager_id: string;
  
  // Scores performance
  quality_score: number;
  delivery_score: number;
  satisfaction_score: number;
  overall_score: number;
  
  // MÃ©triques business
  monthly_revenue: number;
  orders_count: number;
  products_count: number;
  rating: number;
  
  // Certifications
  certifications: string[];
  
  // Informations lÃ©gales
  siret?: string;
  vat_number?: string;
  address?: string;
  
  created_at: Date;
  updated_at: Date;
}

interface CommissionDetail {
  id: string;
  partner_id: string;
  order_id: string;
  product_name: string;
  sale_amount: number;
  commission_rate: number;
  commission_amount: number;
  status: 'pending' | 'paid' | 'disputed';
  created_at: Date;
}

interface PartnerPortalAccess {
  partner_id: string;
  username: string;
  last_login?: Date;
  permissions: string[];
  is_active: boolean;
}
```

## âœ… Validations

### Contraintes Business

- **Commission minimum** : 15% pour tous tiers
- **Commission maximum** : 40% pour exclusifs
- **Score qualitÃ© minimum** : 3.0/5 pour activation
- **DÃ©lai paiement maximum** : NET 45

### Permissions

- **Partnership Manager** : CRUD complet + nÃ©gociations
- **Accounting** : Commissions + paiements
- **Admin** : Toutes actions
- **Support** : Lecture + communication

## ğŸš¨ Gestion d'Erreurs

### Scenarios ProblÃ©matiques

```typescript
const partnerErrors = {
  COMMISSION_TOO_LOW: "Commission en dessous du minimum autorisÃ©",
  SIRET_INVALID: "SIRET invalide ou dÃ©jÃ  utilisÃ©",
  QUALITY_SCORE_LOW: "Score qualitÃ© insuffisant pour activation",
  PORTAL_ACCESS_FAILED: "Impossible de crÃ©er accÃ¨s portail"
};
```

## ğŸ“ Tests Utilisateur

### ScÃ©narios Critiques

1. **Onboarding partenaire** : Processus complet <10min
2. **Calcul commissions** : PrÃ©cision 100%
3. **Analytics performance** : Temps rÃ©el
4. **Communication** : Messages instantanÃ©s
5. **Portail accÃ¨s** : Login fluide

### Performance

- **Liste partenaires** : <800ms
- **Analytics gÃ©nÃ©ration** : <3s
- **Commission calcul** : <1s
- **Export rapport** : <5s

---

**Stack Technique** : React Hook Form + Chart.js + tRPC + PostgreSQL  
**PrioritÃ©** : ğŸ”¥ Critique - CÅ“ur relation partenaires  
**Estimation** : 10-14 jours dÃ©veloppement + portail partenaire
